class Breed < ActiveRecord::Base
  has_many :pups
  
  has_one :widget
  
  attr_accessible :name

  def Breed.is_valid_breed(breed)
    Breed.all_breeds.include? breed
    # !Breed.where(name: breed).empty?
  end

  def Breed.find_breed_by_substr(s)
    first = Breed.all_breeds.select { |b| b.downcase.starts_with? s.downcase }
    second = Breed.all_breeds.select { |b| (Breed.contain? b.downcase, s.downcase) && (!b.downcase.starts_with? s.downcase) }
    first.concat(second)
  end

  def Breed.find_by_name(breed_name)
    result = Breed.where("name = ?", breed_name).first
    # Added on 7/15/17
    if !result
      return nil
    end
    return result
  end
  
  def Breed.contain?(name, str)
    #name.gsub!(/\W+/, '')
    flag = false
    name.split(" ").each do |sub|
      flag = true if sub.starts_with? str
    end
    return flag
  end

  #private
  def Breed.all_breeds
    return Breed.select('name').map{ |e| e.name }.to_a
  end

end
